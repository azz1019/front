<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch then</title>
</head>
<body>
    <h3><a href="../index.html">상위폴더로 돌아가기</a></h3>
    <h1>Promise 객체를 리턴하는 함수를 호출하는 함수는 then메서드를 사용하여 실행순서를 기다리게 할수있다</h1>
    <ul>
        <li>fetch 함수 : 데이터 통신을위해 제공되는 함수이며 첫번째 파라미터는 url, 두번째 파라미터는 header에 적용될 객체를 사용한다</li>
        <li>then 메서드 : Promise객체를 리턴하는 함수 및 메서드를 기다려서 다음순서의 로직을 수행하기위한 연결기능을 한다</li>
    </ul>
    <h3>https://jsonplaceholder.typicode.com/ 을 활용한 fetch then연습</h3>
    <button type="button" id="btn">데이터 불러오기</button>
    <ul id="ul"></ul>

    <script>
        function print_data(object) {
            let ul = document.getElementById('ul');
            for(const key in object) {
                ul.innerHTML += `<li>${key} : ${object[key]}</li>`;
            }
        }

        document.getElementById('btn').addEventListener('click', () => {
            // fetch('https://jsonplaceholder.typicode.com/todos/1')
            // .then(resp => resp.json())
            // .then(json => console.log(json));

            fetch('https://jsonplaceholder.typicode.com/todos/1')
            .then(resp => resp.json())
            .then(json => print_data(json));
        });
    </script>
</body>
</html>